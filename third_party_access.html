<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Third party access &#8212; wastd 0.70.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script src="_static/documentation_options.js?v=ecf2ad1f"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Developer documentation" href="developers.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="third-party-access">
<span id="pa"></span><h1>Third party access<a class="headerlink" href="#third-party-access" title="Link to this heading">¶</a></h1>
<p>If you are DBCA staff and not yet signed in, or if you are an external user,
visiting WAStD will redirect you to the DBCA Auth2 page to authenticate through DBCA Microsoft 365
or sign in/up using a Microsoft account, Google, or an arbitrary email.</p>
<p>The allowed domains of arbitrary email accounts are restricted to the set of known external users.</p>
<p>On first login, you will land on the “Welcome! Permission denied” page.
Your access attempt will be logged and we will be in touch once your permissions have been assigned.
Once permissions have been assigned, you can login again and will get to the WAStD home page.</p>
<p>Logins are valid for a day. Once a login has expired, you will need to login again.</p>
<p>Roles and permissions are allocated by adding the following groups to a User profile:</p>
<ul class="simple">
<li><p><strong>Data viewers</strong> (group “data viewers”) will be able to view all data owned by or shared with the User’s organisation, but not edit it.</p></li>
<li><p><strong>Data curators</strong> (group “data curators”) will be able to access the data curation and QA portal. They can edit data and assign QA trust levels.</p></li>
<li><p><strong>Data analysts</strong> (group “api”) can find instructions how to access and authenticate against the API on their profile page.
They can access all data, and upload new data in bulk.</p></li>
</ul>
<p>Detailed instructions for each role are available in the following chapters.</p>
<section id="managing-access">
<h2>Managing access<a class="headerlink" href="#managing-access" title="Link to this heading">¶</a></h2>
<p>DBCA users are automatically added to the organisation “DBCA” and get the role “data viewer”.</p>
<p>A WAStD admin manages the access permissions for a given User:</p>
<p>Add a User to Group “data viewers” to give them initial access to WAStD,
and add the User to their Organisation to give them visibility to all data owned by this or shared with this Organisation.
Users can be part of several Organisations, although most will belong to exactly one.</p>
<p>Bulk updates run by an admin on the <code class="docutils literal notranslate"><span class="pre">./manage.py</span> <span class="pre">shell_plus</span></code> on the server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add active users with a DBCA email who have logged into WAStD in the past to Group &quot;DBCA&quot;</span>
<span class="c1"># This gives them access to DBCA data</span>
<span class="n">dbca</span> <span class="o">=</span> <span class="n">Organisation</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s2">&quot;dbca&quot;</span><span class="p">)</span>
<span class="n">dv</span> <span class="o">=</span> <span class="n">Group</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;data viewer&quot;</span><span class="p">)</span>
<span class="p">[[</span><span class="n">u</span><span class="o">.</span><span class="n">organisations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dbca</span><span class="p">),</span> <span class="n">u</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dv</span><span class="p">)]</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">email__icontains</span><span class="o">=</span><span class="s2">&quot;@dbca.wa.gov.au&quot;</span><span class="p">,</span> <span class="n">is_active</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">last_login</span><span class="o">=</span><span class="kc">None</span><span class="p">)]</span>

<span class="c1"># Add active users who have logged into WAStD in the past to Group &quot;data viewers&quot;</span>
<span class="c1"># This gives them access to WAStD</span>
<span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dv</span><span class="p">)</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">last_login</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_active</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">wastd</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data_entry.html">Data entry</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_qa.html">Data QA</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_consumers.html">Data consumers</a></li>
<li class="toctree-l1"><a class="reference internal" href="business_analysts.html">Business Analysts</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Developer documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Third party access</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#managing-access">Managing access</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="developers.html" title="previous chapter">Developer documentation</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Florian Mayer, Ashley Felton.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/third_party_access.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>