{% extends "base_wastd.html" %}

{% load static bootstrap4 %}

{% block extra_style %}
{{ block.super }}
{{ form.media.css }}
<style>
  input, select {width: 200px}
  .center-form {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }
  </style>
  {% endblock %}
  
  {% block extra_head %}
  {# Select2 widgets need jQuery to be loaded at the top of the template, so we move it here. #}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  {% endblock extra_head %}

{% block breadcrumbs %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
        <li class="breadcrumb-item"><a href="{% url 'wamtram2:entry_batches'%}">Entry batches</a></li>
        {% if form.batch_id.value %}
        <li class="breadcrumb-item"><a href="{% url 'wamtram2:entry_batch_detail' form.batch_id.value %}">{{form.batch_id.value}}</a></li>
        {% endif %}
    </ol>
</nav>
{% endblock %}
  {% block page_content_inner %}
  
  <div class="center-form">
    <h3>Search for a Turtle</h1>
      <div class="row">
        
        <div class="col col-12 mb-3">
          <div class="card card-lg shadow-lg">
            <div class="card-body">
              {% if no_turtle_found %}
                <a href="{% url 'wamtram2:newtrtdataentry' form.batch_id.value %}" class="btn btn-primary">Create New Turtle</a>
              {% endif %}
              <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <input type="submit" value="Search">
              </form>
              {% if turtle %}
              <p>Turtle ID: {{ turtle.turtle_id }}</p>
              <p>Sex: {{ turtle.sex }}</p>
              <p>Species: {{ turtle.species_code }}</p>
              <p>Status: {{ turtle.turtle_status }}</p>
              <p>Date entered: {{ turtle.date_entered }}</p>
              <p>Flipper tag IDs:</p>
              <ul>
                {% for tag in tags %}
                <li>{{tag.side}}:{{ tag.tag_id }}</li>
                {% endfor %}
              </ul>
              <p>Pit tag IDs:</p>
              <ul>
                {% for tag in pittags %}
                <li>{{ tag.pittag_id }}</li>
                {% endfor %}
              </ul>
    
              <a href="{% url 'wamtram2:existingtrtdataentry' batch_id=form.batch_id.value turtle_id=turtle.turtle_id %}" class="btn btn-primary">Create New Observation</a>
              {% endif %}
            </div><!-- .card-body -->
          </div><!-- .card -->
        </div><!-- .col -->
      </div>
    </div>
    {% endblock %}
    
    {% block extra_js %}  
    {{ form.media.js }}
    {% endblock %}
    
    